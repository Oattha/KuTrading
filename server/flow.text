üõí ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Marketplace Community (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Facebook Marketplace)
üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏ß‡πá‡∏ö Marketplace ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ

‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≤‡∏¢/‡πÅ‡∏•‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó

‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô

‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢

‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Admin ‡∏î‡∏π‡πÅ‡∏• ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)

üìå ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (User) ‡∏ó‡∏≥‡πÑ‡∏î‡πâ

‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£ / ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô

‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏î‡πâ‡∏ß‡∏¢ email + password

Login ‚Üí ‡πÑ‡∏î‡πâ token (JWT) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏ö‡∏≠‡∏£‡πå, ‡∏£‡∏π‡∏õ, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà

‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)

‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô

‡∏£‡∏≠ Admin ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô ‚Üí user ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‚Äúverified‚Äù

‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå (Post)

‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ, ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î, ‡∏£‡∏≤‡∏Ñ‡∏≤

‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏î‡πâ

‡∏°‡∏µ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå + ‡∏Å‡∏î‡πÑ‡∏•‡∏Å‡πå

‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó (Chat)

‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢

‡πÉ‡∏ä‡πâ private chat (1 ‡∏ï‡πà‡∏≠ 1)

‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Trade (‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢/‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)

‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á ‚ÄúTrade‚Äù

‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ trade ‡πÄ‡∏ä‡πà‡∏ô pending, completed, canceled

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö trade ‚Üí ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ

‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß (Review)

‡∏´‡∏•‡∏±‡∏á trade ‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (1‚Äì5 ‡∏î‡∏≤‡∏ß) + ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå

‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÄ‡∏£‡∏ï‡∏ï‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á user

‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Notification)

‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ trade ‡πÉ‡∏´‡∏°‡πà, message ‡πÉ‡∏´‡∏°‡πà, ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÉ‡∏´‡∏°‡πà

üëë ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á Admin

‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

‡∏•‡∏ö/‡πÅ‡∏ö‡∏ô user

‡∏õ‡∏•‡∏î‡πÅ‡∏ö‡∏ô user

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö KYC

‡∏î‡∏π‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà user ‡∏™‡πà‡∏á‡∏°‡∏≤

‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å log ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß/‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Report)

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ user report ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß/‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

Admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö, ‡∏ã‡πà‡∏≠‡∏ô, ‡∏´‡∏£‡∏∑‡∏≠ resolve report ‡πÑ‡∏î‡πâ

üóÇÔ∏è ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô (Backend Tech Stack)

Node.js + Express ‚Üí REST API

Prisma ORM ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ PostgreSQL

JWT + bcrypt ‚Üí Auth + Security

PostgreSQL ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• user, post, trade, review

Docker (optional) ‚Üí deploy ‡∏Ç‡∏∂‡πâ‡∏ô server ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

üåê ‡∏ü‡∏£‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏≠‡∏ô‡∏î‡πå (Frontend Tech Stack)

React + Vite + TypeScript

TailwindCSS ‚Üí ‡∏ó‡∏≥ UI

Zustand ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ state

React Hook Form ‚Üí ‡∏ü‡∏≠‡∏£‡πå‡∏°

Framer Motion ‚Üí animation

‚úÖ Flow ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

User ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ + ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô

Admin ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö + ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‚Üí user ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô verified

User ‡∏•‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≤‡∏¢/‡πÅ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á

‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏ä‡∏ó ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠ trade

‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà‡∏ï‡∏Å‡∏•‡∏á ‚Üí ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô trade

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö trade ‚Üí ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏±‡∏ô

‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏µ‡∏ß‡∏¥‡∏ß + ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‚Üí user report ‚Üí Admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£

‡∏™‡∏£‡∏∏‡∏õ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ: ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ Facebook Marketplace mini version ‡∏ó‡∏µ‡πà‡∏°‡∏µ

Post

Chat

Trade

Review

Admin Management

KYC Verification












üõ†Ô∏è Production Checklist ‚Äì Marketplace Community
1. üîê ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Security)

 ‡πÉ‡∏ä‡πâ HTTPS (SSL/TLS) ‚Üí ‡∏ñ‡πâ‡∏≤ deploy ‡∏ö‡∏ô VPS/Cloud ‡πÉ‡∏ä‡πâ NGINX + Let‚Äôs Encrypt

 ‡πÄ‡∏û‡∏¥‡πà‡∏° Rate limiting (‡πÄ‡∏ä‡πà‡∏ô express-rate-limit) ‡∏Å‡∏±‡∏ô brute force

 ‡πÄ‡∏û‡∏¥‡πà‡∏° Input validation (Joi/Zod/Yup) ‚Üí ‡∏Å‡∏±‡∏ô SQL injection / payload ‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ

 ‡∏ó‡∏≥ Refresh Token + ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ session ‚Üí ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô JWT ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏/‡∏ñ‡∏π‡∏Å‡∏Ç‡πÇ‡∏°‡∏¢

 Hash password ‡∏î‡πâ‡∏ß‡∏¢ bcrypt (>= 10 salt rounds) (‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß ‚úÖ)

 ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£ log sensitive data ‡πÄ‡∏ä‡πà‡∏ô password, token

2. üóÇÔ∏è ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå (File Storage)

 ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ (Post images, Profile picture, KYC docs) ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà Cloud Storage ‡πÄ‡∏ä‡πà‡∏ô:

Cloudinary (‡∏á‡πà‡∏≤‡∏¢ + ‡∏ü‡∏£‡∏µ tier)

AWS S3 / GCP Storage

 ‡πÉ‡∏ô DB ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà URL ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÑ‡∏ü‡∏•‡πå base64

3. üì© ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏• (Email)

 Dev/Test ‡πÉ‡∏ä‡πâ Mailtrap/Ethereal (‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á)

 Production ‡πÉ‡∏ä‡πâ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡πà‡∏ô:

SendGrid

Mailgun

Amazon SES

 ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DKIM / SPF / DMARC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏î‡πÄ‡∏°‡∏ô ‚Üí ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏°‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡∏¢‡∏∞

4. üìä Database & ORM

 ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ Prisma migrate deploy ‡πÉ‡∏ô production (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ dev)

 Backup DB ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (daily/weekly)

 ‡πÉ‡∏ä‡πâ connection pool (PgBouncer, Prisma Data Proxy) ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ user ‡πÄ‡∏¢‡∏≠‡∏∞

 Index column ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (email, tradeId, userId)

5. ‚ö° Performance & Scaling

 ‡πÄ‡∏õ‡∏¥‡∏î Caching (Redis ‡∏´‡∏£‡∏∑‡∏≠ memory cache) ‚Üí ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö notification, session

 ‡∏ó‡∏≥ Pagination ‡∏Å‡∏±‡∏ö endpoint ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå/‡∏£‡∏µ‡∏ß‡∏¥‡∏ß/‡πÅ‡∏ä‡∏ó (‡∏Å‡∏±‡∏ô DB overload)

 ‡πÉ‡∏ä‡πâ CDN ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ (Cloudflare, Cloudinary CDN)

6. üõ°Ô∏è Admin Panel

 ‡∏ó‡∏≥ UI dashboard ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin (‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÅ‡∏ï‡πà API)

 ‡πÄ‡∏û‡∏¥‡πà‡∏° role check ‚Üí ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Admin ‡∏ó‡∏µ‡πà verified ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏î approve/reject KYC ‡πÑ‡∏î‡πâ

 Log action ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà Admin ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡πÅ‡∏ö‡∏ô/approve (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô DB)

7. üê≥ Deployment

 ‡∏™‡∏£‡πâ‡∏≤‡∏á Dockerfile + docker-compose.yml ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö server + db

 ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ .env ‡πÅ‡∏¢‡∏Å dev/prod

 ‡πÉ‡∏ä‡πâ pm2 / Docker restart ‚Üí auto restart server

 ‡πÉ‡∏ä‡πâ VPS/Cloud (‡πÄ‡∏ä‡πà‡∏ô DigitalOcean, AWS, Render) ‚Üí ‡πÉ‡∏´‡πâ public access ‡πÑ‡∏î‡πâ

8. ‚úÖ QA & Monitoring

 ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Unit Test (Jest/Supertest) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Auth, Post, Trade, Review

 ‡πÄ‡∏û‡∏¥‡πà‡∏° Error Tracking (Sentry, LogRocket)

 ‡πÄ‡∏û‡∏¥‡πà‡∏° Health Check endpoint /health ‚Üí ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö load balancer






 src/
 ‚îî‚îÄ‚îÄ pages/
      ‚îî‚îÄ‚îÄ user/
          ‚îú‚îÄ‚îÄ Home.tsx              # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å, feed ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
          ‚îú‚îÄ‚îÄ Profile.tsx           # ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
          ‚îú‚îÄ‚îÄ EditProfile.tsx       # ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
          ‚îú‚îÄ‚îÄ KycUpload.tsx         # ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
          ‚îú‚îÄ‚îÄ Posts/
          ‚îÇ   ‚îú‚îÄ‚îÄ MyPosts.tsx       # ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
          ‚îÇ   ‚îú‚îÄ‚îÄ CreatePost.tsx    # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà
          ‚îÇ   ‚îî‚îÄ‚îÄ PostDetail.tsx    # ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏û‡∏™‡∏ï‡πå
          ‚îú‚îÄ‚îÄ Trades/
          ‚îÇ   ‚îú‚îÄ‚îÄ MyTrades.tsx      # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Trade ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
          ‚îÇ   ‚îî‚îÄ‚îÄ TradeDetail.tsx   # ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Trade
          ‚îú‚îÄ‚îÄ Reviews.tsx           # ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö/‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô
          ‚îú‚îÄ‚îÄ Chats/
          ‚îÇ   ‚îú‚îÄ‚îÄ ChatList.tsx      # ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          ‚îÇ   ‚îî‚îÄ‚îÄ ChatRoom.tsx      # ‡∏Ñ‡∏∏‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó
          ‚îú‚îÄ‚îÄ Notifications.tsx     # ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
          ‚îî‚îÄ‚îÄ Settings.tsx          # ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤, logout



1) Prisma: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏°‡πÄ‡∏î‡∏• + ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå
1.1 ‡πÄ‡∏û‡∏¥‡πà‡∏° relation ‡πÉ‡∏ô User ‡πÅ‡∏•‡∏∞ Post (‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
model User {
  // ... ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  savedPosts SavedPost[]    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
}

model Post {
  // ... ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  savedBy    SavedPost[]    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
}

1.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏• SavedPost

‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå (‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

model SavedPost {
  user     User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId   Int
  post     Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId   Int
  createdAt DateTime @default(now())

  @@id([userId, postId]) // ‡∏´‡πâ‡∏≤‡∏° user ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß save ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥
  @@index([postId])
}

1.3 ‡∏£‡∏±‡∏ô migration
npx prisma migrate dev --name add_saved_posts

2) Backend
2.1 Routes ‡πÉ‡∏´‡∏°‡πà: server/src/routes/savedRoutes.js

‡πÑ‡∏°‡πà‡πÑ‡∏õ‡∏¢‡∏∏‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å ‚Äú‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ import ‡πÄ‡∏Ç‡πâ‡∏≤ index.js

// server/src/routes/savedRoutes.js
import express from "express"
import { authCheck } from "../middlewares/authCheck.js"
import { toggleSave, getSavedPosts } from "../controllers/savedController.js"

const router = express.Router()

// ‡∏Å‡∏î Save/Unsave
router.post("/:postId/toggle", authCheck, toggleSave)

// ‡∏î‡∏∂‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà user ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
router.get("/", authCheck, getSavedPosts)

export default router

2.2 Controller ‡πÉ‡∏´‡∏°‡πà: server/src/controllers/savedController.js

‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà ‡πÑ‡∏°‡πà‡πÑ‡∏õ‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°

// server/src/controllers/savedController.js
import prisma from "../config/prisma.js"

// ‚úÖ ‡∏Å‡∏î‡∏™‡∏•‡∏±‡∏ö Save / Unsave
export const toggleSave = async (req, res) => {
  try {
    const postId = Number(req.params.postId)
    const userId = req.user.id

    const existing = await prisma.savedPost.findUnique({
      where: { userId_postId: { userId, postId } },
    })

    if (existing) {
      await prisma.savedPost.delete({
        where: { userId_postId: { userId, postId } },
      })
      return res.json({ saved: false })
    } else {
      await prisma.savedPost.create({
        data: { userId, postId },
      })
      return res.json({ saved: true })
    }
  } catch (err) {
    console.error(err)
    res.status(500).json({ message: "Error toggling save" })
  }
}

// ‚úÖ ‡∏î‡∏∂‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
export const getSavedPosts = async (req, res) => {
  try {
    const rows = await prisma.savedPost.findMany({
      where: { userId: req.user.id },
      include: {
        post: {
          include: {
            author: { select: { id: true, name: true, avatarUrl: true, ratingAverage: true, ratingCount: true } },
            images: { orderBy: { position: "asc" } },
            comments: {
              include: {
                author: true,
              },
            },
            likes: true,
            trades: {
              where: {
                OR: [{ buyerId: req.user.id }, { sellerId: req.user.id }],
              },
              select: { id: true, status: true },
            },
          },
        },
      },
      orderBy: { createdAt: "desc" },
    })

    // map -> post ‡∏û‡∏£‡πâ‡∏≠‡∏° isSaved/tradeStatus
    const posts = rows.map((r) => ({
      ...r.post,
      tradeStatus: r.post.trades && r.post.trades.length > 0 ? r.post.trades[0].status : null,
      isSaved: true,
    }))

    res.json(posts)
  } catch (err) {
    console.error(err)
    res.status(500).json({ message: "Error getting saved posts" })
  }
}

2.3 ‡∏ú‡∏π‡∏Å Route ‡πÉ‡∏ô server/src/index.js

‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏µ‡∏¢‡∏á 2 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î import + app.use (‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏Å‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô)

// server/src/index.js
import savedRoutes from "./routes/savedRoutes.js"   // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°

// ... ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

app.use("/api/saved", savedRoutes)                  // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°

2.4 ‡πÅ‡∏Å‡πâ Controllers ‡πÄ‡∏î‡∏¥‡∏° ‚Äú‡πÅ‡∏ö‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‚Äù (‡πÑ‡∏°‡πà‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
2.4.1 ‡πÉ‡∏ô getPosts (‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÅ‡∏Å‡πâ) ‡πÄ‡∏û‡∏¥‡πà‡∏° isSaved ‡πÉ‡∏´‡πâ client ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

‡πÄ‡∏≠‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô getPosts ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏ó‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ (‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏ï‡∏∞)

// ---------------- GET POSTS ----------------
export const getPosts = async (req, res) => {
  try {
    // ‡∏î‡∏∂‡∏á post
    const posts = await prisma.post.findMany({
      include: {
        author: { 
          select: { id: true, name: true, avatarUrl: true, ratingAverage: true, ratingCount: true } 
        },
        images: { orderBy: { position: "asc" } },
        comments: { include: { author: true } },
        likes: true,
        // ‡∏ñ‡πâ‡∏≤ login ‚Üí include trades, ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà login ‚Üí false
        trades: req.user
          ? {
              where: {
                OR: [{ buyerId: req.user.id }, { sellerId: req.user.id }],
              },
              select: { id: true, status: true },
            }
          : false,
      },
      orderBy: { createdAt: "desc" },
    })

    // ‡∏ñ‡πâ‡∏≤ login ‚Üí ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° set ‡∏Ç‡∏≠‡∏á postId ‡∏ó‡∏µ‡πà user ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
    let savedIds = new Set()
    if (req.user) {
      const saved = await prisma.savedPost.findMany({
        where: { userId: req.user.id },
        select: { postId: true },
      })
      savedIds = new Set(saved.map((s) => s.postId))
    }

    // map tradeStatus + isSaved
    const withStatus = posts.map((p) => ({
      ...p,
      tradeStatus: p.trades && p.trades.length > 0 ? p.trades[0].status : null,
      isSaved: req.user ? savedIds.has(p.id) : false,
    }))

    return res.json(withStatus)
  } catch (err) {
    console.error(err)
    return res.status(500).json({ message: "Error getting posts" })
  }
}

2.4.2 ‡πÉ‡∏ô listPosts (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ feed ‡πÅ‡∏ö‡∏ö pagination) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô isSaved ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô

‡πÅ‡∏ó‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ

// ---------------- PAGINATION ----------------
export const listPosts = async (req, res) => {
  try {
    const page = Math.max(parseInt(req.query.page ?? "1", 10), 1);
    const pageSize = Math.min(Math.max(parseInt(req.query.pageSize ?? "10", 10), 1), 50);

    const [total, items] = await Promise.all([
      prisma.post.count(),
      prisma.post.findMany({
        orderBy: { createdAt: "desc" },
        skip: (page - 1) * pageSize,
        take: pageSize,
        include: {
          images: { orderBy: { position: "asc" } },
          author: { 
            select: { id: true, name: true, avatarUrl: true, ratingAverage: true, ratingCount: true } 
          },
          comments: { include: { author: true } },
          likes: true,
          trades: req.user
            ? {
                where: {
                  OR: [{ buyerId: req.user.id }, { sellerId: req.user.id }],
                },
                select: { id: true, status: true },
              }
            : false,
        },
      }),
    ]);

    // saved set
    let savedIds = new Set()
    if (req.user) {
      const saved = await prisma.savedPost.findMany({
        where: { userId: req.user.id },
        select: { postId: true },
      })
      savedIds = new Set(saved.map((s) => s.postId))
    }

    const withStatus = items.map((p) => ({
      ...p,
      tradeStatus: p.trades && p.trades.length > 0 ? p.trades[0].status : null,
      isSaved: req.user ? savedIds.has(p.id) : false,
    }))

    return res.json({ ok: true, total, page, pageSize, items: withStatus });
  } catch (err) {
    console.error(err);
    return res.status(500).json({ ok: false, message: "Error listing posts" });
  }
};

2.4.3 ‡πÉ‡∏ô getPostById ‡πÉ‡∏™‡πà isSaved ‡∏î‡πâ‡∏ß‡∏¢

‡πÅ‡∏ó‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ

// ‡∏î‡∏∂‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
export const getPostById = async (req, res) => {
  try {
    const { id } = req.params

    const post = await prisma.post.findUnique({
      where: { id: Number(id) },
      include: {
        images: true,
        comments: {
          include: {
            author: { select: { id: true, name: true, email: true, avatarUrl: true } }
          },
          orderBy: { createdAt: "asc" }
        },
        author: { select: { id: true, name: true, email: true, avatarUrl: true } },
        trades: req.user
          ? {
              where: { OR: [{ buyerId: req.user.id }, { sellerId: req.user.id }] },
              select: { id: true, status: true }
            }
          : false
      }
    })

    if (!post) return res.status(404).json({ message: "Post not found" })

    let isSaved = false
    if (req.user) {
      const s = await prisma.savedPost.findUnique({
        where: { userId_postId: { userId: req.user.id, postId: post.id } },
        select: { postId: true },
      })
      isSaved = !!s
    }

    const withStatus = {
      ...post,
      tradeStatus: post.trades && post.trades.length > 0 ? post.trades[0].status : null,
      isSaved
    }

    res.json(withStatus)
  } catch (error) {
    console.error(error)
    res.status(500).json({ message: "Error fetching post" })
  }
}

3) Frontend

‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‚Äù ‡πÇ‡∏î‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡∏±‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≠‡∏Å
‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏µ‡∏¢‡∏á ‚Äú‡πÄ‡∏ï‡∏¥‡∏° import / type / ‡∏õ‡∏∏‡πà‡∏° / handler‚Äù ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

3.1 ‡∏õ‡∏£‡∏±‡∏ö Home.tsx ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Save

‡πÑ‡∏ü‡∏•‡πå: C:\marketplace3\client\src\pages\user\Home.tsx

(A) ‡πÄ‡∏û‡∏¥‡πà‡∏° import ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô
import { FaHome, FaRegCommentDots, FaExchangeAlt, FaPlus, FaTimes, FaBookmark, FaRegBookmark } from "react-icons/fa" // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° FaBookmark, FaRegBookmark

(B) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô interface Post
interface Post {
  id: number
  content: string
  createdAt: string
  author: Author
  images: PostImage[]
  comments: Comment[]
  likes: Like[]
  tradeStatus?: "requested" | "pending" | "accepted" | "completed" | "canceled" | null
  isSaved?: boolean            // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°
}

(C) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô toggle save (‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡πÜ handleToggleLike)
const handleToggleSave = async (postId: number) => {
  try {
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å toggle
    const res = await api.post(`/saved/${postId}/toggle`)
    const { saved } = res.data

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï state ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß (optimistic)
    setPosts(prev =>
      prev.map(p => p.id === postId ? { ...p, isSaved: saved } : p)
    )
  } catch (err) {
    console.error("Error toggling save", err)
  }
}

(D) ‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πà‡∏° Save ‡∏Ç‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡πÉ‡∏à (‡πÉ‡∏ô card ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏û‡∏™‡∏ï‡πå)

‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô ‚Äú‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‚Äù ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏° Save ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≠‡∏Å

{/* ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡πÉ‡∏à + ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å */}
<div className="flex items-center gap-3 mt-2">
  <button
    onClick={() => handleToggleLike(post.id)}
    className={`px-3 py-1 rounded-full text-sm font-medium shadow 
                ${post.likes.some(like => like.userId === user?.id) 
                  ? "bg-red-500 text-white" 
                  : "bg-gray-200 text-gray-700"}`}
  >
    ‚ù§Ô∏è {post.likes.length}
  </button>

  {/* ‚úÖ ‡∏õ‡∏∏‡πà‡∏° Save/Unsave */}
  <button
    onClick={() => handleToggleSave(post.id)}
    className={`px-3 py-1 rounded-full text-sm font-medium shadow inline-flex items-center gap-2
                ${post.isSaved ? "bg-indigo-600 text-white" : "bg-gray-200 text-gray-700"}`}
    title={post.isSaved ? "‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" : "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ô‡∏µ‡πâ"}
  >
    {post.isSaved ? <FaBookmark /> : <FaRegBookmark />}
    {post.isSaved ? "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß" : "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"}
  </button>
</div>


‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: getPosts ‡∏ù‡∏±‡πà‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÅ‡∏Å‡πâ ‡∏à‡∏∞‡∏™‡πà‡∏á isSaved ‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å

3.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‚Äù (‡πÉ‡∏´‡∏°‡πà)

‡πÑ‡∏ü‡∏•‡πå: C:\marketplace3\client\src\pages\user\SavedPosts.tsx

‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÇ‡∏´‡∏•‡∏î /saved ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô feed ‡∏¢‡πà‡∏≠‡πÜ (‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö UI ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Home.tsx ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≠‡∏¢‡∏ó‡∏≥‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á)

import { useEffect, useState } from "react"
import { api } from "@/lib/api"
import { Link } from "react-router-dom"
import { FaBookmark } from "react-icons/fa"
import { useAuth } from "@/store/auth"

interface Author {
  id: number
  name: string
  avatarUrl?: string
}
interface PostImage { id: number; url: string }
interface Comment { id: number; content: string; createdAt: string; author: Author }
interface Like { userId: number }
interface Post {
  id: number
  content: string
  createdAt: string
  author: Author
  images: PostImage[]
  comments: Comment[]
  likes: Like[]
  tradeStatus?: "requested" | "pending" | "accepted" | "completed" | "canceled" | null
  isSaved?: boolean
}

export default function SavedPosts() {
  const { user } = useAuth()
  const [items, setItems] = useState<Post[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    const run = async () => {
      try {
        const res = await api.get<Post[]>("/saved")
        setItems(res.data)
      } catch (e) {
        console.error(e)
      } finally {
        setLoading(false)
      }
    }
    run()
  }, [])

  if (loading) return <div className="p-6">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

  return (
    <div className="p-6 max-w-2xl mx-auto">
      <div className="flex items-center gap-2 text-2xl font-bold">
        <FaBookmark className="text-indigo-600" />
        <h1>‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</h1>
      </div>

      <div className="mt-6 space-y-6">
        {items.length === 0 ? (
          <p className="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</p>
        ) : (
          items.map((post) => (
            <div key={post.id} className="border rounded-2xl shadow-sm bg-white p-5 space-y-3">
              <div className="flex items-center gap-3">
                <Link to={`/profile/${post.author.id}`} className="flex items-center gap-3 hover:opacity-80">
                  <img
                    src={post.author.avatarUrl || "https://placehold.co/40"}
                    alt={post.author.name}
                    className="w-10 h-10 rounded-full object-cover border"
                  />
                  <div>
                    <p className="font-semibold text-gray-800">{post.author.name}</p>
                    <p className="text-xs text-gray-500">{new Date(post.createdAt).toLocaleString("th-TH")}</p>
                  </div>
                </Link>
              </div>

              <p className="text-gray-800">{post.content}</p>

              {post.images?.length > 0 && (
                <div className={`grid gap-2 ${post.images.length === 1 ? "grid-cols-1" : post.images.length === 2 ? "grid-cols-2" : "grid-cols-2 md:grid-cols-3"}`}>
                  {post.images.map(img => (
                    <img key={img.id} src={img.url} className="rounded-lg object-cover w-full h-56" />
                  ))}
                </div>
              )}

              {/* ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ó‡∏£‡∏î‡∏ñ‡πâ‡∏≤‡∏°‡∏µ */}
              {post.tradeStatus && (
                <div>
                  <span className={`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs
                    ${post.tradeStatus === "completed" ? "bg-green-500 text-white" :
                      post.tradeStatus === "pending" ? "bg-yellow-400 text-black" :
                      post.tradeStatus === "canceled" ? "bg-red-500 text-white" : "bg-gray-300 text-gray-700"}`}>
                    {post.tradeStatus === "requested" && "‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"}
                    {post.tradeStatus === "pending" && "‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}
                    {post.tradeStatus === "accepted" && "‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß"}
                    {post.tradeStatus === "completed" && "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"}
                    {post.tradeStatus === "canceled" && "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß"}
                  </span>
                </div>
              )}
            </div>
          ))
        )}
      </div>
    </div>
  )
}

3.3 ‡πÄ‡∏û‡∏¥‡πà‡∏° Route ‡∏´‡∏ô‡πâ‡∏≤ /saved

‡πÑ‡∏ü‡∏•‡πå router ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á client (‡πÄ‡∏ä‡πà‡∏ô App.tsx ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® Routes ‡∏≠‡∏¢‡∏π‡πà)

import SavedPosts from "@/pages/user/SavedPosts"   // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° import

// ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÉ‡∏ô <Routes>
<Route path="/saved" element={<SavedPosts />} />   // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°

3.4 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô Navbar (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)

‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏Ñ‡πà ‚Äú‡πÄ‡∏û‡∏¥‡πà‡∏° item‚Äù ‡πÉ‡∏ô navItems + ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ö‡∏∏‡πä‡∏Ñ‡∏°‡∏≤‡∏£‡πå‡∏Ñ

import { FaHome, FaExchangeAlt, FaComments, FaBell, FaBookmark } from "react-icons/fa" // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° FaBookmark

const navItems = [
  { path: "/", icon: <FaHome size={18} />, label: "Home" },
  { path: "/trades", icon: <FaExchangeAlt size={18} />, label: "Trades" },
  { path: "/chats", icon: <FaComments size={18} />, label: "Chats" },
  { path: "/notifications", icon: <FaBell size={18} />, label: "Notifications" },
  { path: "/saved", icon: <FaBookmark size={18} />, label: "Saved" }, // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π
]


‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ ‚Äú‡∏à‡∏∏‡∏î‡πÅ‡∏î‡∏á‚Äù ‡∏ö‡∏ô‡πÄ‡∏°‡∏ô‡∏π Saved ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏Å‡πá‡∏ö‡∏ß‡∏Å state ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Home ‡πÉ‡∏´‡πâ‡∏¢‡∏¥‡∏á event/localStorage ‡πÑ‡∏ß‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á ‚Äî ‡∏Ñ‡πà‡∏≠‡∏¢‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ

4) ‡∏™‡∏£‡∏∏‡∏õ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°

 Prisma: ‡πÄ‡∏û‡∏¥‡πà‡∏° relation + ‡πÇ‡∏°‡πÄ‡∏î‡∏• SavedPost ‡πÅ‡∏•‡πâ‡∏ß migrate

 Backend: ‡πÄ‡∏û‡∏¥‡πà‡∏° savedRoutes + savedController + ‡∏ú‡∏π‡∏Å /api/saved

 ‡πÅ‡∏Å‡πâ getPosts / listPosts / getPostById ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á isSaved ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠ login

 Frontend: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Save ‡πÉ‡∏ô Home.tsx (‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô)

 ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà /saved ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ

 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π Saved ‡πÉ‡∏ô Navbar (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)

‡∏ñ‡πâ‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏´‡∏ô ‡∏ö‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå+‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ú‡∏°‡πÅ‡∏õ‡∏∞‡πÉ‡∏´‡πâ‡πÅ‡∏ö‡∏ö copy‚Äìpaste ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö üí™